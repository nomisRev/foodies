{"id":"bd-1q1","title":"Create KeycloakRealmImport CR for realm and identity configuration","description":"Create KeycloakRealmImport CR for realm and identity configuration - Replace init script job with KeycloakRealmImport CRD. Define realm, client, client scope, role, and user configuration","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T23:56:16.571092Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:02:02.676634Z","closed_at":"2026-01-23T00:02:02.676596Z","close_reason":"done","compaction_level":0,"original_size":0}
{"id":"bd-2t0","title":"Add imagePullPolicy configuration to Keycloak CR","description":"The current Keycloak CR does not specify imagePullPolicy, which may cause issues in development.\n\nCurrent state:\n- Old deployment.yaml had imagePullPolicy: IfNotPresent\n- Keycloak CR does not specify this setting\n\nAction required:\nAdd imagePullPolicy to ensure proper image handling in different environments:\n\nFor dev: IfNotPresent\nFor prod: Always (or as appropriate)\n\nFile to modify: k8s/base/keycloak/keycloak-cr.yaml","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-23T00:22:37.113146Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:22:37.113146Z","compaction_level":0,"original_size":0}
{"id":"bd-2xn","title":"Remove init script job (keycloak-config-job.yaml) after operator migration","description":"Remove init script job (keycloak-config-job.yaml) after operator migration - Delete keycloak-config-job.yaml and keycloak-realm-import-patch.yaml as they're replaced by KeycloakOperator CRs","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T23:56:16.718255Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:02:02.677577Z","closed_at":"2026-01-23T00:02:02.677541Z","close_reason":"done","compaction_level":0,"original_size":0}
{"id":"bd-31c","title":"Document Keycloak Operator deployment and testing process","description":"Create comprehensive documentation for deploying and testing Keycloak Operator setup.\n\nContent needed:\n1. Prerequisites checklist\n2. Step-by-step Operator installation\n3. CR deployment process\n4. Verification steps\n5. Troubleshooting guide\n6. Rollback procedure\n\nCurrent documentation:\n- k8s/base/keycloak/README.md exists but needs updates for actual deployment\n\nAction required:\nUpdate k8s/base/keycloak/README.md with:\n- Actual Operator installation commands\n- Verification commands for CR status\n- Troubleshooting steps specific to Operator issues\n- How to check custom image is loaded\n- How to verify profile-webhook is working","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-23T00:22:44.184786Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:22:44.184786Z","compaction_level":0,"original_size":0}
{"id":"bd-38y","title":"Verify environment variable substitution works in Keycloak Operator","description":"The dev overlay uses environment variable substitution ($(FOODIES_HOST)) which may not work correctly with Keycloak Operator.\n\nCurrent state:\n- keycloak-env-patch.yaml has: KC_HOSTNAME: \"http://$(FOODIES_HOST)/auth\"\n- This pattern works in Kubernetes Deployment but may not work in CR\n\nAction required:\nTest if environment variable substitution works in Keycloak Operator CR. If not, use ConfigMap or Secret references directly.\n\nAlternatives:\n1. Use direct value from ConfigMap\n2. Use separate ConfigMap for hostname\n3. Use substitution in Kustomize patches\n\nFiles to check:\n- k8s/overlays/dev/keycloak-env-patch.yaml\n- k8s/base/keycloak/keycloak-cr.yaml","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-23T00:22:39.302583Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:22:39.302583Z","compaction_level":0,"original_size":0}
{"id":"bd-3bv","title":"Verify and fix health probes in Keycloak CR","description":"The current Keycloak CR has healthEnabled and metricsEnabled options, but may need explicit probe configuration.\n\nCurrent state:\n- keycloak-cr.yaml has healthEnabled: true and metricsEnabled: true\n- httpManagement.port: 9000 is configured\n- Old deployment.yaml had explicit probes:\n  - startupProbe on /health/started\n  - livenessProbe on /health/live\n  - readinessProbe on /health/ready\n\nAction required:\nVerify if Keycloak Operator automatically creates probes when healthEnabled is true. If not, add explicit probe configuration to podSpec.\n\nFile to check/modify: k8s/base/keycloak/keycloak-cr.yaml","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-23T00:22:24.322679Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:22:24.322679Z","compaction_level":0,"original_size":0}
{"id":"bd-3fn","title":"Test and validate Keycloak Operator CR configuration in dev environment","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-23T00:06:13.737406Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:06:13.737406Z","compaction_level":0,"original_size":0}
{"id":"bd-3l0","title":"Install Keycloak Operator in foodies namespace before applying CRs","description":"Install Keycloak Operator in foodies namespace - kubectl create namespace foodies && kubectl apply -f https://raw.githubusercontent.com/keycloak/keycloak-operator/main/kubernetes/target/kubernetes/operator/0.0.0/operator.yaml","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-23T00:01:44.095543Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:05:34.162166Z","compaction_level":0,"original_size":0}
{"id":"bd-3r7","title":"Create Keycloak CR for server configuration","description":"Create Keycloak CR for server configuration - Replace deployment.yaml with Keycloak CRD (k8s.keycloak.org/v2alpha1). Configure hostname, HTTP, database, health metrics, and RabbitMQ integration","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T23:56:16.218838Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:02:02.675631Z","closed_at":"2026-01-23T00:02:02.675569Z","close_reason":"done","compaction_level":0,"original_size":0}
{"id":"bd-3sg","title":"Refactor Keycloak deployment to use Keycloak Operator","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T23:56:16.058590Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:02:02.678008Z","closed_at":"2026-01-23T00:02:02.677972Z","close_reason":"done","compaction_level":0,"original_size":0}
{"id":"bd-3vy","title":"Update Kustomize to use Keycloak Operator CRDs instead of Deployment","description":"Update Kustomize to use Keycloak Operator CRDs instead of Deployment - Update base kustomization to include Keycloak CR and KeycloakRealmImport CR. Remove init script job from dev overlay","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T23:56:17.185058Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:02:02.677124Z","closed_at":"2026-01-23T00:02:02.677088Z","close_reason":"done","compaction_level":0,"original_size":0}
{"id":"bd-4fz","title":"Delete deprecated init script files after validating Keycloak Operator setup works","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-23T00:06:17.979361Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:06:17.979361Z","compaction_level":0,"original_size":0}
{"id":"bd-axw","title":"Configure resource limits and requests in Keycloak CR","description":"The current Keycloak CR does not include CPU and memory resource limits/requests.\n\nCurrent state:\n- keycloak-cr.yaml has no resource configuration\n- Old deployment.yaml had:\n  - requests: memory: 512Mi, cpu: 200m\n  - limits: memory: 1Gi, cpu: 1000m\n\nAction required:\nAdd resource configuration to Keycloak CR using podSpec:\n\n```yaml\nspec:\n  keycloakDeploymentSpec:\n    podSpec:\n      containers:\n        - name: keycloak\n          resources:\n            requests:\n              memory: \"512Mi\"\n              cpu: \"200m\"\n            limits:\n              memory: \"1Gi\"\n              cpu: \"1000m\"\n```\n\nFile to modify: k8s/base/keycloak/keycloak-cr.yaml","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-23T00:22:22.466328Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:22:22.466328Z","compaction_level":0,"original_size":0}
{"id":"bd-dbo","title":"Add monitoring and observability for Keycloak Operator","description":"Ensure Keycloak Operator deployment is properly monitored.\n\nCurrent state:\n- Old deployment.yaml had metricsEnabled: true\n- Keycloak CR also has metricsEnabled: true\n\nAction required:\n1. Verify Prometheus ServiceMonitor is configured for Keycloak metrics\n2. Ensure metrics endpoint is accessible (port 9000)\n3. Add Keycloak Operator metrics to monitoring stack\n4. Create dashboards for Keycloak Operator status\n\nFiles to check:\n- k8s/base/prometheus/configmap.yaml\n- Any existing ServiceMonitor resources","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-23T00:22:47.622417Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:22:47.622417Z","compaction_level":0,"original_size":0}
{"id":"bd-i1r","title":"Ensure custom Keycloak image with profile-webhook is used","description":"The custom foodies-keycloak image includes the profile-webhook event listener that sends events to RabbitMQ.\n\nCurrent state:\n- Dev overlay overrides foodies-keycloak image tag to latest\n- Keycloak Operator may default to using standard quay.io/keycloak/keycloak:latest image\n- Custom image location: keycloak-rabbitmq-publisher module\n\nAction required:\nEnsure the Keycloak CR explicitly uses the custom foodies-keycloak image that includes the ProfileWebhookEventListener.\n\nPossible solutions:\n1. Add image override in CR spec\n2. Use ImagePullPolicy and ensure custom image is in registry\n3. Use Kustomize image transformer (already in dev overlay)\n\nFiles to check:\n- k8s/base/keycloak/keycloak-cr.yaml\n- k8s/overlays/dev/kustomization.yaml\n\nVerification:\nAfter deployment, verify profile-webhook listener is loaded by checking Keycloak logs.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-23T00:22:31.015931Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:22:31.015931Z","compaction_level":0,"original_size":0}
{"id":"bd-izz","title":"Review and validate hostname configuration for Keycloak Operator","description":"The hostname configuration needs validation for Keycloak Operator deployment.\n\nCurrent state:\n- KC_HOSTNAME is set to \"http://$(FOODIES_HOST)/auth\" in dev overlay\n- KC_HOSTNAME_ADMIN is set to \"http://$(FOODIES_HOST)/auth\"\n- keycloak-cr.yaml has hostname configuration but may not match\n\nPotential issues:\n1. Environment variable substitution ($(FOODIES_HOST)) may not work in CR\n2. Hostname format may need adjustment for Operator\n3. Operator expects hostname field in spec, not just env vars\n\nAction required:\nReview Keycloak Operator documentation and ensure hostname is correctly configured.\n\nFiles to check:\n- k8s/base/keycloak/keycloak-cr.yaml\n- k8s/overlays/dev/keycloak-env-patch.yaml\n- k8s/base/keycloak/kustomization.yaml (keycloak-config ConfigMap)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-23T00:22:33.637011Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:22:33.637011Z","compaction_level":0,"original_size":0}
{"id":"bd-qxr","title":"Create Kustomize overlay for production Keycloak Operator configuration","description":"The production overlay needs to be created or updated for Keycloak Operator deployment.\n\nCurrent state:\n- k8s/overlays/prod/kustomization.yaml exists\n- May need Keycloak-specific patches for production\n\nAction required:\n1. Create or update k8s/overlays/prod/keycloak-patches.yaml with:\n   - Production hostname configuration\n   - Production resource limits (if different)\n   - ImagePullPolicy: Always or appropriate setting\n   - Any production-specific env vars\n\n2. Ensure production overlay includes Keycloak CR patches","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-23T00:22:46.026022Z","created_by":"simonvergauwen","updated_at":"2026-01-23T00:22:46.026022Z","compaction_level":0,"original_size":0}
