{"id":"bd-10j","title":"Fix RabbitMQ permissions - services lack configure access","description":"Services (menu_service, payment_service, order_service, basket_service) are getting ACCESS_REFUSED errors when trying to declare exchanges and queues in RabbitMQ. They need configure permissions granted in the RabbitMQ configuration. Pod logs show: 'ACCESS_REFUSED - configure access to exchange foodies.events in vhost / refused for user menu_service'","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-22T15:37:40.141991Z","created_by":"simonvergauwen","updated_at":"2026-01-26T18:53:27.760421Z","closed_at":"2026-01-26T18:53:27.760389Z","close_reason":"done","compaction_level":0,"original_size":0}
{"id":"bd-15c","title":"Test Jaeger v2 locally before k8s deployment","description":"Test the new Jaeger v2 image locally (docker run or compose) to verify: container starts, UI is accessible, OTLP endpoints are working, basic trace ingestion works.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:45:05.240475Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:03:36.588618Z","closed_at":"2026-01-22T15:03:36.588592Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["jaeger-v2-migration","testing"],"dependencies":[{"issue_id":"bd-15c","depends_on_id":"bd-1ca","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"},{"issue_id":"bd-15c","depends_on_id":"bd-1mx","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"},{"issue_id":"bd-15c","depends_on_id":"bd-3eb","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-19x","title":"Run integration tests with Jaeger v2","description":"Run './gradlew jvmTest' or appropriate test commands to verify services work correctly with Jaeger v2. Ensure trace collection in tests works as expected.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:45:08.653174Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:15:06.676947Z","closed_at":"2026-01-22T15:15:06.676923Z","close_reason":"Jaeger v2 deployed successfully. UI accessible, traces being collected. Service startup issues are related to pre-existing RabbitMQ permissions, not Jaeger.","compaction_level":0,"original_size":0,"labels":["jaeger-v2-migration","testing"],"dependencies":[{"issue_id":"bd-19x","depends_on_id":"bd-2lr","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-1b8","title":"Update RabbitMQ docs for renamed exchange","description":"Docs still mention the deprecated exchange name foodies.events. Update RABBITMQ security plan and order README to reflect exchange=foodies and new permission examples.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-26T21:07:30.642117Z","created_by":"simonvergauwen","updated_at":"2026-01-27T09:15:45.427116Z","closed_at":"2026-01-27T09:15:45.427091Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["docs","rabbitmq"]}
{"id":"bd-1ca","title":"Verify and update Jaeger v2 port configuration","description":"Verify port compatibility in deployment.yaml. Current: 16686 (UI), 14250 (gRPC). V2 may need: 16686 (UI), 4317 (OTLP gRPC), 4318 (OTLP HTTP). Update ports and service configuration as needed.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:45:00.977417Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:02:52.296926Z","closed_at":"2026-01-22T15:02:52.296897Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["deployment","jaeger-v2-migration"],"dependencies":[{"issue_id":"bd-1ca","depends_on_id":"bd-3cz","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-1d8","title":"Migrate events-order events to RoutingKeyOwner","description":"Replace HasRoutingKey with RoutingKeyOwner pattern in events/events-order/src/main/kotlin/io/ktor/foodies/events/order/Events.kt\n\nEvents to migrate:\n- OrderSubmittedEvent (line 27)\n- OrderStockConfirmedEvent (line 44)\n- OrderStockRejectedEvent (line 58)\n- OrderCancelledEvent (line 67)\n- OrderShippedEvent (line 75)\n- OrderPaidEvent (line 94)\n\nEach event should:\n1. Implement RoutingKeyOwner<T> instead of HasRoutingKey\n2. Add @Transient routingKey property\n3. Add companion object with key() function returning RoutingKey<T>","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T12:38:24.623017Z","created_by":"simonvergauwen","updated_at":"2026-01-27T12:42:28.181889Z","closed_at":"2026-01-27T12:42:28.181808Z","compaction_level":0,"original_size":0}
{"id":"bd-1e6","title":"Fix RabbitMQ Topology Operator authentication","description":"The RabbitMQ Topology Operator is failing to create users with '401 Unauthorized' errors when connecting to the RabbitMQ management API. This prevents services from connecting to RabbitMQ. Investigation needed: Check how topology operator authenticates to RabbitMQ cluster and ensure it has correct credentials for the management API.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-26T10:57:39.973142Z","created_by":"simonvergauwen","updated_at":"2026-01-26T11:06:59.531533Z","closed_at":"2026-01-26T11:06:59.531472Z","compaction_level":0,"original_size":0}
{"id":"bd-1ej","title":"Retry handling via x-death tracking","description":"Implement Message.deliveryAttempts from x-death headers. Update nack() to check attempts vs MaxAttempts policy before deciding to dead-letter or requeue.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-27T20:08:12.929185Z","created_by":"simonvergauwen","updated_at":"2026-01-27T21:07:01.073198Z","closed_at":"2026-01-27T21:07:01.073172Z","close_reason":"All implementation tasks complete: QueueOptions API, deliveryAttempts tracking, nack() retry logic, and DLX/DLQ topology","compaction_level":0,"original_size":0,"labels":["rabbitmq-ext"],"dependencies":[{"issue_id":"bd-1ej","depends_on_id":"bd-31j","type":"blocks","created_at":"2026-01-27T20:08:31.106008Z","created_by":"simonvergauwen"}]}
{"id":"bd-1em","title":"Validate Jaeger v2 deployment in k8s","description":"Verify: pod running successfully, UI accessible at http://foodies.local:16686, traces collected from services, trace query functionality working. Check logs for any errors or warnings.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:45:07.594562Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:15:13.225430Z","closed_at":"2026-01-22T15:15:13.225398Z","close_reason":"Jaeger v2 validated: pod running with v2.14.0 image, UI accessible at foodies.local/jaeger, OTLP endpoints active on 4317/4318, traces being collected from services","compaction_level":0,"original_size":0,"labels":["jaeger-v2-migration","k8s","testing"],"dependencies":[{"issue_id":"bd-1em","depends_on_id":"bd-2lr","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-1et","title":"Review Jaeger v2 documentation for breaking changes","description":"Review official Jaeger v2 docs to understand: architecture changes, breaking changes from v1, config format changes, port/endpoint changes, env var changes. Resources: migration guide, getting started, GitHub issue #6321","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:44:58.161544Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:01:20.938929Z","closed_at":"2026-01-22T15:01:20.938901Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["jaeger-v2-migration","research"]}
{"id":"bd-1hw","title":"Update main README: remove 'In Development' status for Order and Payment services","description":"Main README.md lines 49-50 mark Order and Payment services as 'ðŸš§ In Development', but both services are fully implemented with complete source code, routes, services, repositories, and tests. Update status to 'âœ… Active'.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T22:06:02.631789Z","created_by":"simonvergauwen","updated_at":"2026-01-26T22:09:39.468056Z","closed_at":"2026-01-26T22:09:39.468030Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["documentation"]}
{"id":"bd-1j4","title":"Deploy fails on fresh clusters without foodies namespace","description":"k8s/base/kustomization.yaml no longer includes the namespace resource. On a fresh cluster,  will fail because the  namespace doesn't exist. Either re-add  to base resources or document the required pre-create step.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-26T21:07:24.413858Z","created_by":"simonvergauwen","updated_at":"2026-01-27T09:17:56.362033Z","closed_at":"2026-01-27T09:17:56.361978Z","close_reason":"Will investigate later in different epic","compaction_level":0,"original_size":0,"labels":["deploy","k8s"]}
{"id":"bd-1ky","title":"Build services with updated Jaeger configuration","description":"Run './gradlew build' or appropriate build commands to ensure all services compile with updated Jaeger v2 configuration. Fix any build issues.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:45:04.003889Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:14:55.059498Z","closed_at":"2026-01-22T15:14:55.059473Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["build","jaeger-v2-migration"],"dependencies":[{"issue_id":"bd-1ky","depends_on_id":"bd-15c","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-1mx","title":"Update OTel collector config for Jaeger v2 compatibility","description":"Review k8s/base/otel-collector/collector-config.yaml exporter configuration. Verify endpoint addresses, protocol compatibility, and update any v1-specific configurations for v2.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:45:02.720909Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:02:40.671502Z","closed_at":"2026-01-22T15:02:40.671476Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["jaeger-v2-migration","otel"],"dependencies":[{"issue_id":"bd-1mx","depends_on_id":"bd-3cz","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-1r7","title":"Fix RabbitMQ service credential secret name mismatch","description":"Deployments reference secrets named '*-service-user-credentials', but rabbitmq secrets are defined as '*-service-credentials'. This will leave RABBITMQ_USERNAME/PASSWORD unresolved and pods will fail to start. Align secret names in deployments or rename secrets to match.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-26T21:07:20.926700Z","created_by":"simonvergauwen","updated_at":"2026-01-26T21:44:43.698346Z","closed_at":"2026-01-26T21:44:43.698318Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["k8s","rabbitmq"]}
{"id":"bd-1re","title":"Align RabbitMQ topology management with hybrid Operator/app model","description":"IMPLEMENTATION.md states all exchanges/queues are declared from code at runtime and no K8s CRDs. This conflicts with required hybrid approach (operator-managed shared topology, policies, permissions). Update design to move long-lived/shared exchanges, DLX, DLQs, and policies into operator-managed IaC, leaving only transient per-app queues declared by code.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T15:09:46.622022Z","created_by":"simonvergauwen","updated_at":"2026-01-27T15:12:08.554580Z","closed_at":"2026-01-27T15:12:08.554552Z","close_reason":"done","compaction_level":0,"original_size":0}
{"id":"bd-1u3","title":"Update rabbitmq-ext tests for RoutingKeyOwner","description":"Update test in rabbitmq-ext/src/test/kotlin/io/ktor/foodies/rabbitmq/PublisherSpec.kt\n\nThe TestEvent class (line 12) uses HasRoutingKey. Update it to use RoutingKeyOwner pattern:\n- Replace HasRoutingKey with RoutingKeyOwner<TestEvent>\n- Add @Transient routingKey property\n- Add companion object with key() function","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T12:38:27.939668Z","created_by":"simonvergauwen","updated_at":"2026-01-27T12:55:19.309908Z","closed_at":"2026-01-27T12:55:19.309811Z","compaction_level":0,"original_size":0}
{"id":"bd-1x6","title":"Queue declaration with DLX/DLQ topology","description":"Implement DLX/DLQ topology declaration at subscribe time: declare DLX exchange, DLQ queue, bindings, and main queue with DLX arguments.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-27T20:08:12.042013Z","created_by":"simonvergauwen","updated_at":"2026-01-27T21:06:48.638627Z","closed_at":"2026-01-27T21:06:48.638598Z","close_reason":"Implemented DLX/DLQ topology declaration in subscribe()","compaction_level":0,"original_size":0,"labels":["rabbitmq-ext"],"dependencies":[{"issue_id":"bd-1x6","depends_on_id":"bd-31j","type":"blocks","created_at":"2026-01-27T20:08:31.090653Z","created_by":"simonvergauwen"}]}
{"id":"bd-24z","title":"Remove delay parameter from OrderEventPublisher","description":"Remove the publish(event: GracePeriodExpiredEvent, delay: Duration) method. Use standard publish without delay header.","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-26T22:36:06.860910Z","created_by":"simonvergauwen","updated_at":"2026-01-27T09:32:42.099431Z","deleted_at":"2026-01-27T09:32:42.099428Z","deleted_by":"simonvergauwen","delete_reason":"delete","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-25h","title":"Test QueueOptionsBuilder basic usage","description":"Add simple test using subscribe(queueName, routingKey, configure) API to verify QueueOptionsBuilder works for basic message consumption","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T21:38:18.830919Z","created_by":"simonvergauwen","updated_at":"2026-01-27T21:40:14.341925Z","closed_at":"2026-01-27T21:40:14.341895Z","close_reason":"done","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-25h","depends_on_id":"bd-3vy","type":"parent-child","created_at":"2026-01-27T21:38:18.831427Z","created_by":"simonvergauwen"}]}
{"id":"bd-2fq","title":"Remove x-delayed-message plugin from RabbitMQ config","description":"Update k8s/base/rabbitmq/cluster.yaml to remove additionalPlugins reference and use standard RabbitMQ image.","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-26T22:36:10.053836Z","created_by":"simonvergauwen","updated_at":"2026-01-27T09:32:42.099696Z","deleted_at":"2026-01-27T09:32:42.099693Z","deleted_by":"simonvergauwen","delete_reason":"delete","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-2g6","title":"Add expiration check logic to GracePeriodExpiredEventHandler","description":"Update handler to check event.expiredAt against current time. If grace period not yet expired, delay using kotlinx.coroutines.delay(). Then process order transition.","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-26T22:36:06.173539Z","created_by":"simonvergauwen","updated_at":"2026-01-27T09:32:42.098945Z","deleted_at":"2026-01-27T09:32:42.098943Z","deleted_by":"simonvergauwen","delete_reason":"delete","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-2lr","title":"Deploy Jaeger v2 to local k8s (foodies namespace)","description":"Apply updated manifests to local k8s cluster in foodies namespace. Use kubectl apply for deployment. Monitor pod startup with 'kubectl get pods -n foodies' and 'kubectl logs -n foodies'.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:45:06.512788Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:15:06.676425Z","closed_at":"2026-01-22T15:15:06.676400Z","close_reason":"Jaeger v2 deployed successfully. UI accessible, traces being collected. Service startup issues are related to pre-existing RabbitMQ permissions, not Jaeger.","compaction_level":0,"original_size":0,"labels":["jaeger-v2-migration","k8s","testing"],"dependencies":[{"issue_id":"bd-2lr","depends_on_id":"bd-2vb","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-2or","title":"Remove deprecated HasRoutingKey interface","description":"After all events are migrated to RoutingKeyOwner, remove the deprecated HasRoutingKey interface from rabbitmq-ext module.\n\nFiles to clean up in rabbitmq-ext/src/main/kotlin/io/ktor/foodies/rabbitmq/:\n- Publisher.kt: Remove HasRoutingKey interface and deprecated publish methods\n- RabbitMQ.kt: Remove deprecated subscribe extension function\n\nThis should be done AFTER all event migrations are complete.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T12:38:28.667868Z","created_by":"simonvergauwen","updated_at":"2026-01-27T12:59:00.272352Z","closed_at":"2026-01-27T12:59:00.272323Z","close_reason":"done","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2or","depends_on_id":"bd-1d8","type":"blocks","created_at":"2026-01-27T12:38:35.132799Z","created_by":"simonvergauwen"},{"issue_id":"bd-2or","depends_on_id":"bd-1u3","type":"blocks","created_at":"2026-01-27T12:38:35.191115Z","created_by":"simonvergauwen"},{"issue_id":"bd-2or","depends_on_id":"bd-2uk","type":"blocks","created_at":"2026-01-27T12:38:35.166973Z","created_by":"simonvergauwen"},{"issue_id":"bd-2or","depends_on_id":"bd-g0b","type":"blocks","created_at":"2026-01-27T12:38:35.149696Z","created_by":"simonvergauwen"}]}
{"id":"bd-2pn","title":"Update tests for immediate publishing","description":"Update OrderEventPublisherSpec to test immediate publishing. Add tests for expiration check logic.","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-26T22:36:09.324780Z","created_by":"simonvergauwen","updated_at":"2026-01-27T09:32:42.100122Z","deleted_at":"2026-01-27T09:32:42.100120Z","deleted_by":"simonvergauwen","delete_reason":"delete","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-2ql","title":"Test TTL behavior with TestContainers","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T21:16:39.198162Z","created_by":"simonvergauwen","updated_at":"2026-01-27T21:17:41.079707Z","closed_at":"2026-01-27T21:17:41.079680Z","close_reason":"done","compaction_level":0,"original_size":0}
{"id":"bd-2u4","title":"Fix Order README: incorrect exchange name","description":"Order README (order/README.md) incorrectly states default exchange is 'foodies.events' on lines 17 and 162. The actual default in application.yaml:19 is 'foodies'. Update documentation to reflect correct exchange name.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-26T22:06:00.612810Z","created_by":"simonvergauwen","updated_at":"2026-01-26T22:07:59.109949Z","closed_at":"2026-01-26T22:07:59.109918Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["documentation"]}
{"id":"bd-2uk","title":"Migrate events-menu events to RoutingKeyOwner","description":"Replace HasRoutingKey with RoutingKeyOwner pattern in events/events-menu/src/main/kotlin/io/ktor/foodies/events/menu/Events.kt\n\nEvents to migrate:\n- StockConfirmedEvent (line 11)\n- StockRejectedEvent (line 20)\n\nEach event should:\n1. Implement RoutingKeyOwner<T> instead of HasRoutingKey\n2. Add @Transient routingKey property\n3. Add companion object with key() function returning RoutingKey<T>","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T12:38:27.152662Z","created_by":"simonvergauwen","updated_at":"2026-01-27T12:47:32.931805Z","closed_at":"2026-01-27T12:47:32.931777Z","close_reason":"done","compaction_level":0,"original_size":0}
{"id":"bd-2vb","title":"Publish updated service images for local k8s testing","description":"Run './gradlew publishImageToLocalRegistry' to publish service images with updated Jaeger v2 configuration for deployment to local k8s cluster.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:45:09.884382Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:14:55.060106Z","closed_at":"2026-01-22T15:14:55.060080Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["build","jaeger-v2-migration","k8s"],"dependencies":[{"issue_id":"bd-2vb","depends_on_id":"bd-1ky","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-2wf","title":"Update OrderService to publish without delay","description":"Change eventPublisher.publish call to remove delay parameter.","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-26T22:36:08.729668Z","created_by":"simonvergauwen","updated_at":"2026-01-27T09:32:42.099935Z","deleted_at":"2026-01-27T09:32:42.099933Z","deleted_by":"simonvergauwen","delete_reason":"delete","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-31j","title":"Queue options API for rabbitmq-ext","description":"Add new types (RetryPolicy, DeadLetterPolicy, QueueOptionsBuilder<A>), defaults, and updated subscribe signatures for DLX+TTL support.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-27T20:08:10.689836Z","created_by":"simonvergauwen","updated_at":"2026-01-27T20:42:50.002052Z","closed_at":"2026-01-27T20:42:50.002020Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["rabbitmq-ext"]}
{"id":"bd-32t","title":"Document K8s config update steps for rabbitmq-ext","description":"Update rabbitmq-ext/IMPLEMENTATION.md with details on updating K8s configuration.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T13:35:03.865646Z","created_by":"simonvergauwen","updated_at":"2026-01-27T13:35:50.665674Z","closed_at":"2026-01-27T13:35:50.665648Z","close_reason":"done","compaction_level":0,"original_size":0}
{"id":"bd-36a","title":"Change exchange type from x-delayed-message to direct","description":"Update OrderEventConsumer to use 'direct' exchange type instead of 'x-delayed-message'. Remove x-delayed-type argument.","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-26T22:36:08.074426Z","created_by":"simonvergauwen","updated_at":"2026-01-27T09:32:42.098635Z","deleted_at":"2026-01-27T09:32:42.098629Z","deleted_by":"simonvergauwen","delete_reason":"delete","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-3ad","title":"Fix RabbitMQ permissions for menu, order, payment, basket, webapp services","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T15:14:56.088624Z","created_by":"simonvergauwen","updated_at":"2026-01-26T11:29:17.305438Z","closed_at":"2026-01-26T11:29:17.305406Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["bug","permissions","rabbitmq"]}
{"id":"bd-3cz","title":"Update Jaeger deployment image to v2.14.0","description":"Update k8s/base/jaeger/deployment.yaml - change image from 'jaegertracing/all-in-one:latest' to 'jaegertracing/jaeger:2.14.0'. This pins the version and migrates to v2.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:44:59.935848Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:02:25.956153Z","closed_at":"2026-01-22T15:02:25.956128Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["deployment","jaeger-v2-migration"],"dependencies":[{"issue_id":"bd-3cz","depends_on_id":"bd-1et","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-3eb","title":"Update Jaeger v2 environment variables","description":"Review and update environment variables in deployment.yaml. Jaeger v2 is OTel-based, may need different config format. Verify COLLECTOR_OTLP_ENABLED and other env vars are compatible with v2.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:45:02.058936Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:02:52.297515Z","closed_at":"2026-01-22T15:02:52.297492Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["deployment","jaeger-v2-migration"],"dependencies":[{"issue_id":"bd-3eb","depends_on_id":"bd-3cz","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-3fv","title":"Clarify DLX exchange/routing defaults vs topology","description":"DeadLetterPolicy.Enabled defaults routingKey to {queue}.dlq and exchange to {original}.dlx, but the topology says a single foodies.dlx exchange with per-queue DLQs and default behavior says x-dead-letter-routing-key = queue name and x-dead-letter-exchange = .dlx (exchange variable unclear). Decide whether routing key should be queue name or queue.dlq and whether exchange is always foodies.dlx; update types + docs accordingly. Refs: rabbitmq-ext/IMPLEMENTATION.md:14-16, 24-27, 72-86","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T14:26:05.791700Z","created_by":"simonvergauwen","updated_at":"2026-01-27T14:31:00.726722Z","closed_at":"2026-01-27T14:31:00.726695Z","close_reason":"resolved","compaction_level":0,"original_size":0}
{"id":"bd-3jt","title":"Fix broken ConsumerSpec tests","description":"ConsumerSpec tests are failing with 'Argument type mismatch' errors. Tests need to be updated to use the correct subscribe overload or provide proper type parameters.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T20:30:57.369212Z","created_by":"simonvergauwen","updated_at":"2026-01-27T20:35:33.269484Z","closed_at":"2026-01-27T20:35:33.269451Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["rabbitmq-ext"]}
{"id":"bd-3kj","title":"Fix main README: remove or create missing event documentation references","description":"Main README.md lines 181-184 reference non-existent event README files:\n- events/events-order/README.MD\n- events/events-payment/README.MD  \n- events/events-menu/README.MD\n\nOnly events/events-user/README.MD exists. Either create these README files or remove the references from the main README.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-26T22:06:03.909749Z","created_by":"simonvergauwen","updated_at":"2026-01-26T22:09:39.467316Z","closed_at":"2026-01-26T22:09:39.467286Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["documentation"]}
{"id":"bd-3lw","title":"Fix JWT JWKS configuration for KeyCloak integration","description":"Services (basket, order) are failing to start due to JWT configuration errors. The JWKS provider cannot find the 'sign' key in KeyCloak's JWKS response. KeyCloak returns keys with alg=RS256 but services expect a key with use=sign. Need to update JWT configuration to properly handle KeyCloak's key structure.","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-22T15:37:44.062639Z","created_by":"simonvergauwen","updated_at":"2026-01-26T11:00:50.291124Z","closed_at":"2026-01-26T11:00:50.291065Z","close_reason":"done","compaction_level":0,"original_size":0}
{"id":"bd-3nw","title":"Update nack() to check deliveryAttempts vs MaxAttempts","description":"Modify Message.nack() to check delivery attempts against a MaxAttempts policy. If attempts < max, requeue with basicNack(requeue=true). If attempts >= max, dead-letter with basicNack(requeue=false).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T20:49:48.068723Z","created_by":"simonvergauwen","updated_at":"2026-01-27T21:02:49.696311Z","closed_at":"2026-01-27T21:02:49.696280Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["rabbitmq-ext"],"dependencies":[{"issue_id":"bd-3nw","depends_on_id":"bd-1ej","type":"parent-child","created_at":"2026-01-27T20:50:33.207284Z","created_by":"simonvergauwen"}]}
{"id":"bd-3o4","title":"Add DLX/TTL support to rabbitmq-ext","description":"Create implementation plan for DLX/TTL configuration with type-safe queue definitions.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T13:31:30.119144Z","created_by":"simonvergauwen","updated_at":"2026-01-27T13:32:27.156690Z","closed_at":"2026-01-27T13:32:27.156660Z","close_reason":"IMPLEMENTATION.md added with DLX/TTL plan","compaction_level":0,"original_size":0}
{"id":"bd-3oc","title":"Test QueueOptionsBuilder with DLX topology","description":"Add test for subscribe(queueName, routingKey, configure) function that verifies DLX/DLQ topology is correctly created with QueueOptionsBuilder API","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T21:20:29.173778Z","created_by":"simonvergauwen","updated_at":"2026-01-27T21:37:33.757436Z","closed_at":"2026-01-27T21:37:33.757406Z","close_reason":"done","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3oc","depends_on_id":"bd-3vy","type":"parent-child","created_at":"2026-01-27T21:20:29.174114Z","created_by":"simonvergauwen"}]}
{"id":"bd-3si","title":"Document Jaeger v2 migration and rollback procedure","description":"Update relevant documentation with: migration changes, new port/config details, rollback procedure (revert to jaegertracing/all-in-one:1.76.0), troubleshooting tips.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-22T14:45:11.151109Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:15:37.452983Z","closed_at":"2026-01-22T15:15:37.452954Z","close_reason":"Documentation already complete in IMPLEMENTATION.md including migration steps, breaking changes, rollback procedure","compaction_level":0,"original_size":0,"labels":["documentation","jaeger-v2-migration"],"dependencies":[{"issue_id":"bd-3si","depends_on_id":"bd-1em","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-3vy","title":"TestContainers coverage for DLX+TTL","description":"Add TestContainers-based tests for DLX/DLQ topology, queue arguments, TTL behavior, and retry/dead-letter flows.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-27T20:08:13.805303Z","created_by":"simonvergauwen","updated_at":"2026-01-27T20:08:25.400076Z","compaction_level":0,"original_size":0,"labels":["rabbitmq-ext"],"dependencies":[{"issue_id":"bd-3vy","depends_on_id":"bd-1ej","type":"blocks","created_at":"2026-01-27T20:08:25.400057Z","created_by":"simonvergauwen"},{"issue_id":"bd-3vy","depends_on_id":"bd-1x6","type":"blocks","created_at":"2026-01-27T20:08:25.383447Z","created_by":"simonvergauwen"},{"issue_id":"bd-3vy","depends_on_id":"bd-31j","type":"blocks","created_at":"2026-01-27T20:08:25.369693Z","created_by":"simonvergauwen"}]}
{"id":"bd-awa","title":"Document RabbitMQ binding routing key defaults","description":"K8s RabbitMQ bindings (k8s/base/rabbitmq/bindings.yaml) don't explicitly specify routing keys, relying on operator defaults. This works correctly but isn't documented anywhere. Consider adding documentation explaining how routing keys work with the RabbitMQ Cluster Operator bindings.","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-26T22:06:05.727776Z","created_by":"simonvergauwen","updated_at":"2026-01-26T22:11:48.601860Z","closed_at":"2026-01-26T22:11:48.601835Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["documentation","enhancement","rabbitmq"]}
{"id":"bd-bg7","title":"Remove x-delayed-message plugin from RabbitMQ","description":"Refactor GracePeriodExpiredEvent to use immediate publish + consumer-side delay instead of x-delayed-message plugin. See IMPLEMENTATION.md for complete plan. Three phases: (1) Add timestamp metadata, (2) Implement consumer sleep logic, (3) Remove compatibility code.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-27T09:23:00.445557Z","created_by":"simonvergauwen","updated_at":"2026-01-27T09:32:42.100292Z","deleted_at":"2026-01-27T09:32:42.100291Z","deleted_by":"simonvergauwen","delete_reason":"delete","original_type":"feature","compaction_level":0,"original_size":0}
{"id":"bd-g0b","title":"Migrate events-payment events to RoutingKeyOwner","description":"Replace HasRoutingKey with RoutingKeyOwner pattern in events/events-payment/src/main/kotlin/io/ktor/foodies/events/payment/Events.kt\n\nEvents to migrate:\n- OrderPaymentCompletedEvent (line 18)\n- OrderPaymentFailedEvent (line 29)\n\nEach event should:\n1. Implement RoutingKeyOwner<T> instead of HasRoutingKey\n2. Add @Transient routingKey property\n3. Add companion object with key() function returning RoutingKey<T>","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T12:38:26.251373Z","created_by":"simonvergauwen","updated_at":"2026-01-27T12:44:49.131576Z","closed_at":"2026-01-27T12:44:49.131518Z","compaction_level":0,"original_size":0}
{"id":"bd-g72","title":"Configure storage classes for dev and prod overlays","description":"Currently all services use 'hostpath' storage class which is hardcoded in base manifests. This is only suitable for local development.\n\n## Required Changes\n\n1. **Dev overlay**: Keep hostpath storage (acceptable for local development)\n   - RabbitMQ cluster\n   - PostgreSQL databases (profile, menu, order, payment, keycloak)\n   - Redis\n   - Prometheus\n\n2. **Prod overlay**: Configure cloud-provider or enterprise storage\n   - Options to consider:\n     - Cloud provider storage (AWS EBS, GCP Persistent Disk, Azure Disk)\n     - Network storage (NFS, Ceph, GlusterFS)\n     - Enterprise storage solutions\n   - Need to patch storageClassName in all StatefulSets and PVC templates\n\n## Implementation\n\nUse Kustomize strategic merge patches or JSON patches to override storageClassName:\n- Base manifests should use a reasonable default or placeholder\n- Dev overlay patches to 'hostpath'\n- Prod overlay patches to cloud-appropriate storage class\n\n## Files to Update\n\n- k8s/base/rabbitmq/cluster.yaml\n- PostgreSQL StatefulSets in all service bases\n- Redis configuration\n- Prometheus configuration\n- Create k8s/overlays/dev/ and k8s/overlays/prod/ if they don't exist\n\n## Risk\n\nCurrent hostpath storage means:\n- Data tied to specific node\n- Pod rescheduling to different node = data loss\n- Node failure = data loss\n- Unacceptable for production workloads","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T11:14:07.722514Z","created_by":"simonvergauwen","updated_at":"2026-01-26T19:00:24.443411Z","closed_at":"2026-01-26T19:00:24.443382Z","close_reason":"done","compaction_level":0,"original_size":0}
{"id":"bd-jwy","title":"Define bind() API in QueueOptionsBuilder","description":"Usage examples call bind(...) for multiple routing keys, but QueueOptionsBuilder definition doesn't include bind or any binding collection; implementation steps mention additional bindings from DSL. Specify bind API and internal storage so examples compile and bindings can be applied. Refs: rabbitmq-ext/IMPLEMENTATION.md:32-36, 65-69, 92-96","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T14:26:09.558214Z","created_by":"simonvergauwen","updated_at":"2026-01-27T14:31:02.508079Z","closed_at":"2026-01-27T14:31:02.508053Z","close_reason":"resolved","compaction_level":0,"original_size":0}
{"id":"bd-k1o","title":"Install RabbitMQ x-delayed-message plugin","description":"Order service requires the x-delayed-message exchange type which is not available. The rabbitmq-delayed-message-exchange plugin needs to be installed in RabbitMQ. Error: 'precondition_failed: unknown exchange type x-delayed-message'","status":"tombstone","priority":0,"issue_type":"bug","created_at":"2026-01-22T15:37:42.971325Z","created_by":"simonvergauwen","updated_at":"2026-01-27T09:32:42.099174Z","deleted_at":"2026-01-27T09:32:42.099171Z","deleted_by":"simonvergauwen","delete_reason":"delete","original_type":"bug","compaction_level":0,"original_size":0}
{"id":"bd-tc8","title":"Fix ConsumerSpec tests using deprecated subscribe API","description":"ConsumerSpec.kt tests are using the deprecated subscribe<A>(queueName) API which was replaced with the RoutingKey variant. All test calls need to be updated to use the new API.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-27T20:13:27.152902Z","created_by":"simonvergauwen","updated_at":"2026-01-27T20:22:10.653696Z","closed_at":"2026-01-27T20:22:10.653650Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["rabbitmq-ext"]}
{"id":"bd-zzn","title":"Fix RabbitMQ Security Plan: inconsistent exchange naming","description":"docs/RABBITMQ_SECURITY_PLAN.md references 'foodies.events' exchange on lines 56, 65, 86, and 90. The actual implementation uses 'foodies' exchange (confirmed in all application.yaml files and K8s manifests). Update documentation to use consistent 'foodies' exchange name throughout.","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-26T22:06:04.782387Z","created_by":"simonvergauwen","updated_at":"2026-01-27T09:18:53.711400Z","closed_at":"2026-01-27T09:18:53.711372Z","close_reason":"File docs/RABBITMQ_SECURITY_PLAN.md was removed in commit 033a4cd, resolving the inconsistent exchange naming issue","compaction_level":0,"original_size":0,"labels":["documentation","rabbitmq"]}
