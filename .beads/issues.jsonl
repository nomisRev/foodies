{"id":"bd-10j","title":"Fix RabbitMQ permissions - services lack configure access","description":"Services (menu_service, payment_service, order_service, basket_service) are getting ACCESS_REFUSED errors when trying to declare exchanges and queues in RabbitMQ. They need configure permissions granted in the RabbitMQ configuration. Pod logs show: 'ACCESS_REFUSED - configure access to exchange foodies.events in vhost / refused for user menu_service'","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-22T15:37:40.141991Z","created_by":"simonvergauwen","updated_at":"2026-01-26T18:53:27.760421Z","closed_at":"2026-01-26T18:53:27.760389Z","close_reason":"done","compaction_level":0,"original_size":0}
{"id":"bd-15c","title":"Test Jaeger v2 locally before k8s deployment","description":"Test the new Jaeger v2 image locally (docker run or compose) to verify: container starts, UI is accessible, OTLP endpoints are working, basic trace ingestion works.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:45:05.240475Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:03:36.588618Z","closed_at":"2026-01-22T15:03:36.588592Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["jaeger-v2-migration","testing"],"dependencies":[{"issue_id":"bd-15c","depends_on_id":"bd-1ca","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"},{"issue_id":"bd-15c","depends_on_id":"bd-1mx","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"},{"issue_id":"bd-15c","depends_on_id":"bd-3eb","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-19x","title":"Run integration tests with Jaeger v2","description":"Run './gradlew jvmTest' or appropriate test commands to verify services work correctly with Jaeger v2. Ensure trace collection in tests works as expected.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:45:08.653174Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:15:06.676947Z","closed_at":"2026-01-22T15:15:06.676923Z","close_reason":"Jaeger v2 deployed successfully. UI accessible, traces being collected. Service startup issues are related to pre-existing RabbitMQ permissions, not Jaeger.","compaction_level":0,"original_size":0,"labels":["jaeger-v2-migration","testing"],"dependencies":[{"issue_id":"bd-19x","depends_on_id":"bd-2lr","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-1b8","title":"Update RabbitMQ docs for renamed exchange","description":"Docs still mention the deprecated exchange name foodies.events. Update RABBITMQ security plan and order README to reflect exchange=foodies and new permission examples.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-26T21:07:30.642117Z","created_by":"simonvergauwen","updated_at":"2026-01-26T21:07:30.642470Z","compaction_level":0,"original_size":0,"labels":["docs","rabbitmq"]}
{"id":"bd-1ca","title":"Verify and update Jaeger v2 port configuration","description":"Verify port compatibility in deployment.yaml. Current: 16686 (UI), 14250 (gRPC). V2 may need: 16686 (UI), 4317 (OTLP gRPC), 4318 (OTLP HTTP). Update ports and service configuration as needed.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:45:00.977417Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:02:52.296926Z","closed_at":"2026-01-22T15:02:52.296897Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["deployment","jaeger-v2-migration"],"dependencies":[{"issue_id":"bd-1ca","depends_on_id":"bd-3cz","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-1e6","title":"Fix RabbitMQ Topology Operator authentication","description":"The RabbitMQ Topology Operator is failing to create users with '401 Unauthorized' errors when connecting to the RabbitMQ management API. This prevents services from connecting to RabbitMQ. Investigation needed: Check how topology operator authenticates to RabbitMQ cluster and ensure it has correct credentials for the management API.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-26T10:57:39.973142Z","created_by":"simonvergauwen","updated_at":"2026-01-26T11:06:59.531533Z","closed_at":"2026-01-26T11:06:59.531472Z","compaction_level":0,"original_size":0}
{"id":"bd-1em","title":"Validate Jaeger v2 deployment in k8s","description":"Verify: pod running successfully, UI accessible at http://foodies.local:16686, traces collected from services, trace query functionality working. Check logs for any errors or warnings.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:45:07.594562Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:15:13.225430Z","closed_at":"2026-01-22T15:15:13.225398Z","close_reason":"Jaeger v2 validated: pod running with v2.14.0 image, UI accessible at foodies.local/jaeger, OTLP endpoints active on 4317/4318, traces being collected from services","compaction_level":0,"original_size":0,"labels":["jaeger-v2-migration","k8s","testing"],"dependencies":[{"issue_id":"bd-1em","depends_on_id":"bd-2lr","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-1et","title":"Review Jaeger v2 documentation for breaking changes","description":"Review official Jaeger v2 docs to understand: architecture changes, breaking changes from v1, config format changes, port/endpoint changes, env var changes. Resources: migration guide, getting started, GitHub issue #6321","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:44:58.161544Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:01:20.938929Z","closed_at":"2026-01-22T15:01:20.938901Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["jaeger-v2-migration","research"]}
{"id":"bd-1j4","title":"Deploy fails on fresh clusters without foodies namespace","description":"k8s/base/kustomization.yaml no longer includes the namespace resource. On a fresh cluster,  will fail because the  namespace doesn't exist. Either re-add  to base resources or document the required pre-create step.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-26T21:07:24.413858Z","created_by":"simonvergauwen","updated_at":"2026-01-26T21:07:24.414291Z","compaction_level":0,"original_size":0,"labels":["deploy","k8s"]}
{"id":"bd-1ky","title":"Build services with updated Jaeger configuration","description":"Run './gradlew build' or appropriate build commands to ensure all services compile with updated Jaeger v2 configuration. Fix any build issues.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:45:04.003889Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:14:55.059498Z","closed_at":"2026-01-22T15:14:55.059473Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["build","jaeger-v2-migration"],"dependencies":[{"issue_id":"bd-1ky","depends_on_id":"bd-15c","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-1mx","title":"Update OTel collector config for Jaeger v2 compatibility","description":"Review k8s/base/otel-collector/collector-config.yaml exporter configuration. Verify endpoint addresses, protocol compatibility, and update any v1-specific configurations for v2.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:45:02.720909Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:02:40.671502Z","closed_at":"2026-01-22T15:02:40.671476Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["jaeger-v2-migration","otel"],"dependencies":[{"issue_id":"bd-1mx","depends_on_id":"bd-3cz","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-1r7","title":"Fix RabbitMQ service credential secret name mismatch","description":"Deployments reference secrets named '*-service-user-credentials', but rabbitmq secrets are defined as '*-service-credentials'. This will leave RABBITMQ_USERNAME/PASSWORD unresolved and pods will fail to start. Align secret names in deployments or rename secrets to match.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-26T21:07:20.926700Z","created_by":"simonvergauwen","updated_at":"2026-01-26T21:44:43.698346Z","closed_at":"2026-01-26T21:44:43.698318Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["k8s","rabbitmq"]}
{"id":"bd-2lr","title":"Deploy Jaeger v2 to local k8s (foodies namespace)","description":"Apply updated manifests to local k8s cluster in foodies namespace. Use kubectl apply for deployment. Monitor pod startup with 'kubectl get pods -n foodies' and 'kubectl logs -n foodies'.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:45:06.512788Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:15:06.676425Z","closed_at":"2026-01-22T15:15:06.676400Z","close_reason":"Jaeger v2 deployed successfully. UI accessible, traces being collected. Service startup issues are related to pre-existing RabbitMQ permissions, not Jaeger.","compaction_level":0,"original_size":0,"labels":["jaeger-v2-migration","k8s","testing"],"dependencies":[{"issue_id":"bd-2lr","depends_on_id":"bd-2vb","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-2vb","title":"Publish updated service images for local k8s testing","description":"Run './gradlew publishImageToLocalRegistry' to publish service images with updated Jaeger v2 configuration for deployment to local k8s cluster.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:45:09.884382Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:14:55.060106Z","closed_at":"2026-01-22T15:14:55.060080Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["build","jaeger-v2-migration","k8s"],"dependencies":[{"issue_id":"bd-2vb","depends_on_id":"bd-1ky","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-3ad","title":"Fix RabbitMQ permissions for menu, order, payment, basket, webapp services","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T15:14:56.088624Z","created_by":"simonvergauwen","updated_at":"2026-01-26T11:29:17.305438Z","closed_at":"2026-01-26T11:29:17.305406Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["bug","permissions","rabbitmq"]}
{"id":"bd-3cz","title":"Update Jaeger deployment image to v2.14.0","description":"Update k8s/base/jaeger/deployment.yaml - change image from 'jaegertracing/all-in-one:latest' to 'jaegertracing/jaeger:2.14.0'. This pins the version and migrates to v2.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:44:59.935848Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:02:25.956153Z","closed_at":"2026-01-22T15:02:25.956128Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["deployment","jaeger-v2-migration"],"dependencies":[{"issue_id":"bd-3cz","depends_on_id":"bd-1et","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-3eb","title":"Update Jaeger v2 environment variables","description":"Review and update environment variables in deployment.yaml. Jaeger v2 is OTel-based, may need different config format. Verify COLLECTOR_OTLP_ENABLED and other env vars are compatible with v2.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:45:02.058936Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:02:52.297515Z","closed_at":"2026-01-22T15:02:52.297492Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["deployment","jaeger-v2-migration"],"dependencies":[{"issue_id":"bd-3eb","depends_on_id":"bd-3cz","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-3lw","title":"Fix JWT JWKS configuration for KeyCloak integration","description":"Services (basket, order) are failing to start due to JWT configuration errors. The JWKS provider cannot find the 'sign' key in KeyCloak's JWKS response. KeyCloak returns keys with alg=RS256 but services expect a key with use=sign. Need to update JWT configuration to properly handle KeyCloak's key structure.","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-22T15:37:44.062639Z","created_by":"simonvergauwen","updated_at":"2026-01-26T11:00:50.291124Z","closed_at":"2026-01-26T11:00:50.291065Z","close_reason":"done","compaction_level":0,"original_size":0}
{"id":"bd-3si","title":"Document Jaeger v2 migration and rollback procedure","description":"Update relevant documentation with: migration changes, new port/config details, rollback procedure (revert to jaegertracing/all-in-one:1.76.0), troubleshooting tips.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-22T14:45:11.151109Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:15:37.452983Z","closed_at":"2026-01-22T15:15:37.452954Z","close_reason":"Documentation already complete in IMPLEMENTATION.md including migration steps, breaking changes, rollback procedure","compaction_level":0,"original_size":0,"labels":["documentation","jaeger-v2-migration"],"dependencies":[{"issue_id":"bd-3si","depends_on_id":"bd-1em","type":"blocks","created_at":"2026-01-26T11:00:33Z","created_by":"import"}]}
{"id":"bd-g72","title":"Configure storage classes for dev and prod overlays","description":"Currently all services use 'hostpath' storage class which is hardcoded in base manifests. This is only suitable for local development.\n\n## Required Changes\n\n1. **Dev overlay**: Keep hostpath storage (acceptable for local development)\n   - RabbitMQ cluster\n   - PostgreSQL databases (profile, menu, order, payment, keycloak)\n   - Redis\n   - Prometheus\n\n2. **Prod overlay**: Configure cloud-provider or enterprise storage\n   - Options to consider:\n     - Cloud provider storage (AWS EBS, GCP Persistent Disk, Azure Disk)\n     - Network storage (NFS, Ceph, GlusterFS)\n     - Enterprise storage solutions\n   - Need to patch storageClassName in all StatefulSets and PVC templates\n\n## Implementation\n\nUse Kustomize strategic merge patches or JSON patches to override storageClassName:\n- Base manifests should use a reasonable default or placeholder\n- Dev overlay patches to 'hostpath'\n- Prod overlay patches to cloud-appropriate storage class\n\n## Files to Update\n\n- k8s/base/rabbitmq/cluster.yaml\n- PostgreSQL StatefulSets in all service bases\n- Redis configuration\n- Prometheus configuration\n- Create k8s/overlays/dev/ and k8s/overlays/prod/ if they don't exist\n\n## Risk\n\nCurrent hostpath storage means:\n- Data tied to specific node\n- Pod rescheduling to different node = data loss\n- Node failure = data loss\n- Unacceptable for production workloads","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T11:14:07.722514Z","created_by":"simonvergauwen","updated_at":"2026-01-26T19:00:24.443411Z","closed_at":"2026-01-26T19:00:24.443382Z","close_reason":"done","compaction_level":0,"original_size":0}
{"id":"bd-k1o","title":"Install RabbitMQ x-delayed-message plugin","description":"Order service requires the x-delayed-message exchange type which is not available. The rabbitmq-delayed-message-exchange plugin needs to be installed in RabbitMQ. Error: 'precondition_failed: unknown exchange type x-delayed-message'","status":"open","priority":0,"issue_type":"bug","created_at":"2026-01-22T15:37:42.971325Z","created_by":"simonvergauwen","updated_at":"2026-01-22T15:37:42.971325Z","compaction_level":0,"original_size":0}
