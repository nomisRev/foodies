{"id":"foodies-vko","title":"Fix secure routing DSL to establish AuthContext in coroutine context","description":"The secureUser() and secureService() routing DSL functions are defined but don't properly establish AuthContext in the coroutine context. This is a critical bug that prevents the entire S2S authentication mechanism from working.\n\nCurrent Implementation:\n- secureUser() just wraps authenticate() without establishing context\n- secureService() just wraps authenticate() without establishing context\n\nRequired:\n- Use intercept(ApplicationCallPipeline.Call) to establish context before route handlers execute\n- For secureUser: establish AuthContext.UserAuth(principal.accessToken)\n- For secureService: establish AuthContext.ServiceAuth(serviceToken, userContextToken) with X-User-Context extraction\n\nThis is blocking all downstream work on S2S authentication.","status":"closed","priority":0,"issue_type":"bug","owner":"nomisRev@users.noreply.github.com","created_at":"2026-01-21T11:25:23.473496+01:00","created_by":"Simon Vergauwen","updated_at":"2026-01-21T11:26:59.025391+01:00","closed_at":"2026-01-21T11:26:59.025391+01:00","close_reason":"Closed"}
